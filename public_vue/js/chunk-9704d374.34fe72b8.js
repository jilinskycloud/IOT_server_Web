(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9704d374"],{"20fd":function(e,t,a){"use strict";var i=a("d9f6"),l=a("aebd");e.exports=function(e,t,a){t in e?i.f(e,t,l(0,a)):e[t]=a}},"549b":function(e,t,a){"use strict";var i=a("d864"),l=a("63b6"),s=a("241e"),r=a("b0dc"),n=a("3702"),o=a("b447"),c=a("20fd"),d=a("7cd6");l(l.S+l.F*!a("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,l,u,h=s(e),f="function"==typeof this?this:Array,b=arguments.length,m=b>1?arguments[1]:void 0,p=void 0!==m,g=0,v=d(h);if(p&&(m=i(m,b>2?arguments[2]:void 0,2)),void 0==v||f==Array&&n(v))for(t=o(h.length),a=new f(t);t>g;g++)c(a,g,p?m(h[g],g):h[g]);else for(u=v.call(h),a=new f;!(l=u.next()).done;g++)c(a,g,p?r(u,m,[l.value,g],!0):l.value);return a.length=g,a}})},"774e":function(e,t,a){e.exports=a("d2d5")},ab4c:function(e,t,a){},d2d5:function(e,t,a){a("1654"),a("549b"),e.exports=a("584a").Array.from},e030:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 管理员列表")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:function(t){e.addVisible=!0}}},[e._v("添加角色")]),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选角色名称"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.currentTableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",type:"selection",width:"55",align:"center",label:"ID"}}),a("el-table-column",{attrs:{prop:"name",label:"角色名称",width:"160"}}),a("el-table-column",{attrs:{prop:"remark",label:"角色描述"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"1"==t.row.status?"success":"danger","disable-transitions":""}},[e._v(e._s("1"==t.row.status?"正常":"禁用"))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-lx-crown",disabled:1==t.row.id},on:{click:function(a){e.handleRbac(t.$index,t.row)}}},[e._v("权限设置")]),a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete",disabled:1==t.row.id},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.cur_page,"page-size":e.pageSize,layout:"prev, pager, next",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"添加",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"form_add",attrs:{model:e.form_add,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{model:{value:e.form_add.name,callback:function(t){e.$set(e.form_add,"name",t)},expression:"form_add.name"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:e.form_add.remark,callback:function(t){e.$set(e.form_add,"remark",t)},expression:"form_add.remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAdd}},[e._v("确 定")])],1)],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"权限设置",visible:e.rbacVisible,width:"30%"},on:{"update:visible":function(t){e.rbacVisible=t}}},[a("el-tree",{ref:"tree",attrs:{data:e.rbac,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rbacVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveRbac}},[e._v("确 定")])],1)],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑",visible:e.editVisible,width:"40%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form_edit",attrs:{model:e.form_edit,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{disabled:1==e.form_edit.id},model:{value:e.form_edit.name,callback:function(t){e.$set(e.form_edit,"name",t)},expression:"form_edit.name"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:e.form_edit.remark,callback:function(t){e.$set(e.form_edit,"remark",t)},expression:"form_edit.remark"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"启用","inactive-text":"禁用","active-color":"#13ce66","inactive-color":"#ff4949",disabled:1==e.form_edit.id},model:{value:e.form_edit.status,callback:function(t){e.$set(e.form_edit,"status",t)},expression:"form_edit.status"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)},l=[],s=a("774e"),r=a.n(s),n=(a("57e7"),a("7f7f"),a("ac6a"),a("f3e2"),a("4ec3"),{name:"userlist",data:function(){return{tableData:[],currentTableData:[],filtercurrentTableData:[],totalCount:0,pageSize:10,cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,addVisible:!1,rbac:[],defaultProps:{children:"subs",label:"title"},rbacVisible:!1,editVisible:!1,delVisible:!1,form_add:{name:"",remark:""},form_edit:{id:"",name:"",remark:"",status:""},idx:-1}},created:function(){this.getRolelist()},computed:{},methods:{getRolelist:function(){var e=this;this.$api.role.getRolelist().then(function(t){if(200!=t.code)e.$message({message:"获取权限角色列表失败",type:"error",center:!0,duration:1e3});else if(e.tableData=t.data.list,e.totalCount=e.tableData.length,console.log("total:"+e.totalCount),e.totalCount>e.pageSize)for(var a=0;a<e.pageSize;a++)e.currentTableData.push(e.tableData[a]);else e.currentTableData=e.tableData}).catch(function(e){console.log(e)})},search:function(){var e=this;if(""!=this.select_word||1!=this.is_search)""!=this.select_word||0!=this.is_search?(this.currentTableData=[],this.filtercurrentTableData=[],this.tableData.forEach(function(t,a){t.name&&t.name.indexOf(e.select_word)>=0&&e.filtercurrentTableData.push(t)}),this.cur_page=1,this.totalCount=this.filtercurrentTableData.length,this.currentChangePage(this.filtercurrentTableData),this.is_search=!0):this.$message.warning("查询条件不能为空！");else if(this.is_search=!1,this.currentTableData=[],this.totalCount=this.tableData.length,this.totalCount>this.pageSize){console.log("ddd");for(var t=0;t<this.pageSize;t++)this.currentTableData.push(this.tableData[t])}else this.currentTableData=this.tableData},handleSizeChange:function(e){this.pageSize=e,this.handleCurrentChange(this.cur_page)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.cur_page=e,this.is_search?this.currentChangePage(this.filtercurrentTableData):this.currentChangePage(this.tableData)},currentChangePage:function(e){var t=(this.cur_page-1)*this.pageSize,a=this.cur_page*this.pageSize;for(this.currentTableData=[];t<a;t++)e[t]&&this.currentTableData.push(e[t])},formatter:function(e,t){return e.address},filterTag:function(e,t){return t.tag===e},handleRbac:function(e,t){var a=this;this.idx=e,this.$api.rbac.getall().then(function(e){200!=e.code&&a.$message.error("获取权限列表失败"),a.rbac=e.data,a.rbacVisible=!0})},handleEdit:function(e,t){this.idx=e;var a=this.currentTableData[e];this.form_edit={id:a.id,name:a.name,remark:a.remark,status:a.status},this.editVisible=!0},handleDelete:function(e,t){this.idx=e,this.delVisible=!0},delAll:function(){var e=this.multipleSelection.length,t="";this.del_list=this.del_list.concat(this.multipleSelection);for(var a=0;a<e;a++)t+=this.multipleSelection[a].name+" ";this.$message.error("删除了"+t),this.multipleSelection=[]},handleSelectionChange:function(e){this.multipleSelection=e},saveRbac:function(e){var t=this,a=r()(this.$refs.tree.getCheckedKeys());if(0!=a.length){var i={rbac_ids:a,role_id:this.idx+1,type:"admin"};this.$api.rbac.setRbac(i).then(function(e){200!=e.code&&t.$message.error("授权失败！"),t.rbacVisible=!1,t.$message.success("授权成功")})}else this.$message.warning("角色权限不能为空！")},saveEdit:function(){var e=this;this.$set(this.currentTableData,this.idx,this.form_edit),this.$api.role.editRole(this.form_edit).then(function(t){200!=t.code&&e.$message.error("修改第 ".concat(e.idx+1," 行失败")),e.editVisible=!1,e.$message.success("修改第 ".concat(e.idx+1," 行成功"))}).catch(function(e){console.log(e)})},deleteRow:function(){var e=this,t={id:this.idx+1};this.$api.role.delRole(t).then(function(t){console.log(t),200!=t.code&&e.$message.error("修改第 ".concat(e.idx+1," 行失败")),e.tableData.splice(e.idx,1),e.$message.success("删除成功"),e.delVisible=!1}).catch(function(e){console.log(e)})},saveAdd:function(){var e=this;this.$api.role.addRole(this.form_add).then(function(t){200!=t.code&&e.$message.error("添加角色失败"),e.tableData.push(t.data),e.addVisible=!1,e.$message.success("添加角色成功")}).catch(function(e){console.log(e)})}}}),o=n,c=(a("f3d6"),a("2877")),d=Object(c["a"])(o,i,l,!1,null,null,null);d.options.__file="Userlist.vue";t["default"]=d.exports},f3d6:function(e,t,a){"use strict";var i=a("ab4c"),l=a.n(i);l.a}}]);